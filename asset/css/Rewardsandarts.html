<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/artist_pro.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>

    <header>

        <div class="logo">
            <img src="../asset/images/new_logo plain.png" width="150px" alt="no error">
        </div>

        <div class="input">
            <input type="text" name="search_bar" id="search" placeholder="What do you like today???"> <i
                class="fa fa-search"></i>
        </div>

        <div class="side1_nav">
            <ul>
                <li><a href="">Become a seller</a></li>
                <li><a href="">Sign up</a></li>
                <li> <img src="../asset/images/profile_picture_user_icon_153847.png" width="30px" alt="no error"></li>

            </ul>

        </div>

    </header>
    <!-- hr line  -->
    <span id="hr1">
        <br>
        <hr>
        <br>
    </span>

    <div class="header_prt1">
        <ul>
            <li><a href="../pages/home.html">Home |</a></li>
            <li><a href="categories.html">Products |</a></li>
            <li><a href="findservice,.html">Find Service </a></li>

        </ul>
    </div>
    <span id="hr2">
        <br>
        <hr>
    </span>




    <!-- background_image -->

    <!-- main tag for whole content -->
    <!-- <div class="container">
        <h2>Your Uploaded art</h2>
        <ul class="cards">
            <li class="card">
                <div>
                    <img class="round" src="../images/hyperreal1.jpg" alt="user" />
                    <h3 class="card-title" id="card-title">isac</h3>
                    <div class="card-content">
                        <p>Hyper realistic drawing </p>
                    </div>
                </div>
                <div class="buttons">
                    <button class="primary">
                        Edit
                    </button>
                    <button class="primary ghost">
                        Delete
                    </button>
                </div>
        </ul>
    </div> -->

    <!-- pop up  -->
    <div class="input_box" id="input_box">
        <i class="fa-solid fa-xmark" id="close" style="color: #fc0303;"></i>
        <form id="formbtn"action="">

            <!-- <input type="text" name="title_name" id="title_name"> -->
            <h1 id="title_name1"></h1>
            <br>
            <h3>Descrpiton:</h3>
            <textarea rows="10" cols="50" name="comment" form="usrform" id="des"
                placeholder="Add your description in maximum 20 character" required></textarea>
            <br>
            <h3> Sold By:</h3>
            <input type="text" name="sold_by" id="sold_by">
            <br>
            <h3> Price:</h3>
            <input type="text" name="price" id="price">

            <br>
            <h3>Width and height(mm)</h3>

            <input type="text" name="width" id="width">

            <button type="submit" id="savebtn">Save</button>



        </form>
    </div>


    <script>


        // forloop

        let profile_page = JSON.parse(localStorage.getItem("upload"))

        let showedProduct;
    showedProduct=profile_page.filter((data)=>{
            if(data["status"]==true){
                return true
            }
            else{
                return false
            }
        })
        let container = document.createElement("div");
        container.setAttribute("class", "container");





        let h2 = document.createElement("h2");
        h2.setAttribute("id", "h2_tag");
        h2.innerText = "Your Uploaded art"
        container.append(h2);

        let uli = document.createElement("ul");
        uli.setAttribute("class", "cards")


        for (let i = 0; i < showedProduct.length; i++) {



            let li = document.createElement("li");
            li.setAttribute("class", "card")
            uli.append(li);

            let empty_div = document.createElement("div");
            li.append(empty_div);


            let image = document.querySelector("img");
            image.setAttribute("class", "round")
            image.setAttribute("src", showedProduct[i]["img"]);
            image.setAttribute("alt", "Image loading");
            empty_div.append(image);



            let card_title = document.createElement("h3");
            card_title.setAttribute("id", "card-title");
            card_title.innerText = showedProduct[i]["title_name"]
            empty_div.append(card_title);



            let card_content = document.createElement("div");
            card_content.setAttribute("class", "card-content")
            empty_div.append(card_content);



            let para = document.createElement("p");
            para.innerText = showedProduct[i]["Art_title"];
            card_content.append(para);

            let div_button = document.createElement("div");
            div_button.setAttribute("class", "buttons")
            li.append(div_button);

            let button = document.createElement("button");
            button.setAttribute("class", "primary");
            button.setAttribute("value",showedProduct[i]["title_name"]
 )
            button.innerText = "Edit"
            div_button.append(button);


            let button1 = document.createElement("button");
            button1.setAttribute("class", "primary_ghost");
            button1.setAttribute("value",showedProduct[i]["title_name"]);
            button1.innerText = "Delete"
            div_button.append(button1);
            container.append(uli);
            document.querySelector("body").append(container);

        }













        let input_box = document.getElementsByClassName("input_box")

        console.log(input_box)

        let card_name = document.getElementById("card-title").innerText
        // console.log( card_name)
        // console.log( profile_page[0]["title_name"])

        //view
        let des = document.getElementById("des");
          let sold_by = document.getElementById("sold_by");
          let price  = document.getElementById("price");
          let width = document.getElementById("width");

          let savebtn=document.getElementById("savebtn")
let uploadproducts=JSON.parse(localStorage.getItem("upload"))
// uploadproducts.find((data)=>{

// })
let saveButton;

        let Edit = document.querySelectorAll(".primary");


        Edit.forEach(btn => {

            let buttonValue;
            buttonValue=btn.value
            btn.addEventListener("click", (e) => {
                

                profile_page.find(obj => {
                    // console.log(obj["title_name"])
                    // console.log(card_name)

                    if (obj["title_name"].trim()== card_name) {
                        let head = document.getElementById("title_name1")
                        head.innerText= card_name
                          
                        input_box[0].style.display = "block"
                    // input_box[0].style.display = "block"
                    }

// view
                    for(let i=0;i<uploadproducts.length;i++){
    
    if(btn.value==uploadproducts[i]["title_name"]){
      sold_by.value=uploadproducts[i]["artist_name"];
  des.value=uploadproducts[i]["descr"];
  price.value=uploadproducts[i]["pr"];
  width.value=uploadproducts[i]["size_by"];
  savebtn.value=uploadproducts[i]["title_name"]
    }
}
 
                })
      })
        })



      
  
    savebtn.addEventListener(("click"),()=>{
        let Savedbtn=savebtn.value;
// alert(Savedbtn)

    for(let i=0;i<uploadproducts.length;i++){
    
    if(Savedbtn==uploadproducts[i]["title_name"]){
      uploadproducts[i]["artist_name"]=sold_by.value;
 uploadproducts[i]["descr"]= des.value;
uploadproducts[i]["pr"]=  price.value;
  uploadproducts[i]["size_by"]=width.value;


  localStorage.setItem("upload",JSON.stringify(uploadproducts))


    }
}

        
    })




        
        


        let close_tab = document.getElementById("close");
        close_tab.addEventListener("click", e => {

            input_box[0].style.display = "none";

        })


          
        // delete 

        let deletedd= document.querySelector(".primary_ghost");
            deletedd.addEventListener("click",()=>{

              
                let deletevalue=deletedd.value
                uploadproducts.find((data)=>{
                    if(deletevalue==data["title_name"]){
                        data["status"]=false
                        
                    }
                    
  localStorage.setItem("upload",JSON.stringify(uploadproducts))
                })

                
            })


    </script>

</body>

</html>